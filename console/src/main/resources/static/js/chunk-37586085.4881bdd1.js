(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37586085"],{"471e":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.hasResp?e("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),e("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),e("Row",[e("i-col",{attrs:{span:"12"}},[e("Form",{ref:"drc1",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.srcBuildParam,rules:t.ruleDrc,"label-width":250}},[e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源集群名",prop:"srcMhaName"}},[e("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeSrcMha},model:{value:t.srcBuildParam.mhaName,callback:function(a){t.$set(t.srcBuildParam,"mhaName",a)},expression:"srcBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"选择Replicator",prop:"replicator"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择源集群Replicator"},model:{value:t.srcBuildParam.replicatorIps,callback:function(a){t.$set(t.srcBuildParam,"replicatorIps",a)},expression:"srcBuildParam.replicatorIps"}},t._l(t.replicatorList.src,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigSrcReplicator}},[t._v("自动录入")])],1),t.showMhaApplierConfig(!0)?e("FormItem",{attrs:{label:"选择Applier",prop:"applier"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择源集群Applier"},model:{value:t.srcBuildParam.applierIps,callback:function(a){t.$set(t.srcBuildParam,"applierIps",a)},expression:"srcBuildParam.applierIps"}},t._l(t.applierList.src,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigSrcApplier}},[t._v("自动录入")])],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始拉取位点R"}},[e("Input",{attrs:{placeholder:"变更replicator机器时,请输入binlog拉取位点"},model:{value:t.srcBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.srcBuildParam,"replicatorInitGtid",a)},expression:"srcBuildParam.replicatorInitGtid"}}),e("Row",[e("Col",{attrs:{span:"12"}},[e("Button",{on:{click:t.querySrcMhaMachineGtid}},[t._v("查询mha位点")]),t.hasTest1?e("span",[e("Icon",{attrs:{type:t.testSuccess1?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess1?"green":"red"}}),t._v(" "+t._s(t.testSuccess1?"查询实时位点成功":"连接查询失败")+" ")],1):t._e()],1),e("Col",{attrs:{span:"12"}},[e("Button",{attrs:{type:"success"},on:{click:t.querySrcMhaGtidCheckRes}},[t._v("位点校验")])],1)],1)],1),t.showMhaApplierConfig(!0)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始同步位点A"}},[e("Input",{attrs:{placeholder:"请输入DRC同步起始位点"},model:{value:t.srcBuildParam.applierInitGtid,callback:function(a){t.$set(t.srcBuildParam,"applierInitGtid",a)},expression:"srcBuildParam.applierInitGtid"}})],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"同步配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getSrcDbReplications}},[t._v("同步表管理")])],1),t.showDbMhaApplierConfig(!0)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"DB Applier 配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getSrcDbApplierReplications}},[t._v("Db Applier 管理")])],1):t._e()],1)],1),e("i-col",{attrs:{span:"12"}},[e("Form",{ref:"drc1",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.dstBuildParam,rules:t.ruleDrc,"label-width":250}},[e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"目标集群名",prop:"dstMhaName"}},[e("Input",{attrs:{placeholder:"请输入目标集群名"},on:{input:t.changeDstMha},model:{value:t.dstBuildParam.mhaName,callback:function(a){t.$set(t.dstBuildParam,"mhaName",a)},expression:"dstBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"选择Replicator",prop:"replicator"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择目标集群Replicator"},model:{value:t.dstBuildParam.replicatorIps,callback:function(a){t.$set(t.dstBuildParam,"replicatorIps",a)},expression:"dstBuildParam.replicatorIps"}},t._l(t.replicatorList.dst,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigDstReplicator}},[t._v("自动录入")])],1),t.showMhaApplierConfig(!1)?e("FormItem",{attrs:{label:"选择Applier",prop:"applier"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择目标集群Applier"},model:{value:t.dstBuildParam.applierIps,callback:function(a){t.$set(t.dstBuildParam,"applierIps",a)},expression:"dstBuildParam.applierIps"}},t._l(t.applierList.dst,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigDstApplier}},[t._v("自动录入")])],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始拉取位点R"}},[e("Input",{attrs:{placeholder:"变更replicator机器时,请输入binlog拉取位点"},model:{value:t.dstBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.dstBuildParam,"replicatorInitGtid",a)},expression:"dstBuildParam.replicatorInitGtid"}}),e("Row",[e("Col",{attrs:{span:"12"}},[e("Button",{on:{click:t.queryDstMhaMachineGtid}},[t._v("查询mha位点")]),t.hasTest2?e("span",[e("Icon",{attrs:{type:t.testSuccess2?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess2?"green":"red"}}),t._v(" "+t._s(t.testSuccess2?"查询实时位点成功":"连接查询失败")+" ")],1):t._e()],1),e("Col",{attrs:{span:"12"}},[e("Button",{attrs:{type:"success"},on:{click:t.queryDstMhaGtidCheckRes}},[t._v("位点校验")])],1)],1)],1),t.showMhaApplierConfig(!1)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始同步位点A"}},[e("Input",{attrs:{placeholder:"请输入DRC同步起始位点"},model:{value:t.dstBuildParam.applierInitGtid,callback:function(a){t.$set(t.dstBuildParam,"applierInitGtid",a)},expression:"dstBuildParam.applierInitGtid"}})],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"同步配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getDstDbReplications}},[t._v("同步表管理")])],1),t.showDbMhaApplierConfig(!1)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"DB Applier 配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getDstDbApplierReplications}},[t._v("Db Applier 管理")])],1):t._e()],1)],1)],1),e("Form",{staticStyle:{"margin-top":"50px"},attrs:{"label-width":250}},[e("FormItem",[e("br"),e("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(a){t.preCheckConfigure()}}},[t._v("提交")])],1),e("Modal",{attrs:{title:"确认配置信息",width:"900px"},on:{"on-ok":t.submitConfig},model:{value:t.reviewModal,callback:function(a){t.reviewModal=a},expression:"reviewModal"}},[e("Row",{attrs:{gutter:5}},[e("i-col",{attrs:{span:"12"}},[e("Form",{staticStyle:{width:"80%"}},[e("FormItem",{attrs:{label:"源集群名"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.mhaName,callback:function(a){t.$set(t.srcBuildParam,"mhaName",a)},expression:"srcBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"源集群端Replicator"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.replicatorIps,callback:function(a){t.$set(t.srcBuildParam,"replicatorIps",a)},expression:"srcBuildParam.replicatorIps"}})],1),e("FormItem",{attrs:{label:"源集群端Applier"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.applierIps,callback:function(a){t.$set(t.srcBuildParam,"applierIps",a)},expression:"srcBuildParam.applierIps"}})],1),e("FormItem",{attrs:{label:"源集群端R位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.srcBuildParam,"replicatorInitGtid",a)},expression:"srcBuildParam.replicatorInitGtid"}})],1),e("FormItem",{attrs:{label:"源集群端A位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.applierInitGtid,callback:function(a){t.$set(t.srcBuildParam,"applierInitGtid",a)},expression:"srcBuildParam.applierInitGtid"}})],1)],1)],1),e("i-col",{attrs:{span:"12"}},[e("Form",{staticStyle:{width:"80%"}},[e("FormItem",{attrs:{label:"目标集群名"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.mhaName,callback:function(a){t.$set(t.dstBuildParam,"mhaName",a)},expression:"dstBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"目标集群端Replicator"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.replicatorIps,callback:function(a){t.$set(t.dstBuildParam,"replicatorIps",a)},expression:"dstBuildParam.replicatorIps"}})],1),e("FormItem",{attrs:{label:"目标集群端Applier"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.applierIps,callback:function(a){t.$set(t.dstBuildParam,"applierIps",a)},expression:"dstBuildParam.applierIps"}})],1),e("FormItem",{attrs:{label:"目标集群端R位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.dstBuildParam,"replicatorInitGtid",a)},expression:"dstBuildParam.replicatorInitGtid"}})],1),e("FormItem",{attrs:{label:"目标集群端A位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.applierInitGtid,callback:function(a){t.$set(t.dstBuildParam,"applierInitGtid",a)},expression:"dstBuildParam.applierInitGtid"}})],1)],1)],1)],1)],1),e("Modal",{attrs:{title:"配置结果",width:"1200px"},model:{value:t.resultModal,callback:function(a){t.resultModal=a},expression:"resultModal"}},[e("Form",{staticStyle:{width:"100%"}},[e("FormItem",{attrs:{label:"集群配置"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.result,callback:function(a){t.result=a},expression:"result"}})],1)],1)],1),e("Modal",{attrs:{title:"gitd位点校验结果",width:"900px"},model:{value:t.gtidCheck.modal,callback:function(a){t.$set(t.gtidCheck,"modal",a)},expression:"gtidCheck.modal"}},[e("Form",{staticStyle:{width:"80%"}},[e("FormItem",{attrs:{label:"校验结果"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.legal,callback:function(a){t.$set(t.gtidCheck.resVo,"legal",a)},expression:"gtidCheck.resVo.legal"}})],1),e("FormItem",{attrs:{label:"当前Mha"}},[e("Input",{attrs:{autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.mha,callback:function(a){t.$set(t.gtidCheck.resVo,"mha",a)},expression:"gtidCheck.resVo.mha"}})],1),e("FormItem",{attrs:{label:"配置位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.configGtid,callback:function(a){t.$set(t.gtidCheck.resVo,"configGtid",a)},expression:"gtidCheck.resVo.configGtid"}})],1),e("FormItem",{attrs:{label:"purgedGtid"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.purgedGtid,callback:function(a){t.$set(t.gtidCheck.resVo,"purgedGtid",a)},expression:"gtidCheck.resVo.purgedGtid"}})],1)],1)],1)],1)],1)},s=[],r=(e("a4d3"),e("e01a"),e("d28b"),e("4160"),e("fb6a"),e("d3b7"),e("3ca3"),e("159b"),e("ddb0"),e("53ca")),l=e("2909"),c={name:"drcBuildV2",props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String,env:String},data:function(){return{result:"",status:"",title:"",message:"",hasResp:!1,hasTest1:!1,testSuccess1:!1,hasTest2:!1,testSuccess2:!1,reviewModal:!1,resultModal:!1,replicatorList:{src:[],dst:[]},applierList:{src:[],dst:[]},srcBuildParam:{mhaName:this.srcMhaName,replicatorIps:[],applierIps:[],replicatorInitGtid:"",applierInitGtid:""},srcBuildData:{dbApplierDtos:[],dbApplierSwitch:!1},dstBuildParam:{mhaName:this.dstMhaName,replicatorIps:[],applierIps:[],replicatorInitGtid:"",applierInitGtid:""},dstBuildData:{dbApplierDtos:[],dbApplierSwitch:!1},gtidCheck:{modal:!1,resVo:{mha:"",legal:"",configGtid:"",purgedGtid:""}},ruleDrc:{oldClusterName:[{required:!0,message:"源集群名不能为空",trigger:"blur"}],newClusterName:[{required:!0,message:"新集群名不能为空",trigger:"blur"}],env:[{required:!0,message:"环境不能为空",trigger:"blur"}],replicator:[{required:!0,message:"replicator不能为空",trigger:"blur"}],applier:[{required:!0,message:"applier不能为空",trigger:"blur"}]}}},computed:{dataWithPage:function(){var t=this.nameFilterCheck.tableData,a=this.nameFilterCheck.current*this.nameFilterCheck.size-this.nameFilterCheck.size,e=a+this.nameFilterCheck.size;return Object(l["a"])(t).slice(a,e)}},methods:{flattenObj:function(t){var a={};for(var e in t)if("object"!==Object(r["a"])(t[e])||Array.isArray(t[e]))a[e]=t[e];else{var i=this.flattenObj(t[e]);for(var s in i)a[e+"."+s]=i[s]}return a},autoConfigSrcReplicator:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.srcBuildParam.mhaName+"&type=0&selectedIps="+this.srcBuildParam.replicatorIps).then((function(a){console.log(a.data),t.srcBuildParam.replicatorIps=[],a.data.data.forEach((function(a){return t.srcBuildParam.replicatorIps.push(a.ip)}))}))},autoConfigSrcApplier:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.srcBuildParam.mhaName+"&type=1&selectedIps="+this.srcBuildParam.applierIps).then((function(a){console.log(a.data),t.srcBuildParam.applierIps=[],a.data.data.forEach((function(a){return t.srcBuildParam.applierIps.push(a.ip)}))}))},autoConfigDstReplicator:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.dstBuildParam.mhaName+"&type=0&selectedIps="+this.dstBuildParam.replicatorIps).then((function(a){console.log(a.data),t.dstBuildParam.replicatorIps=[],a.data.data.forEach((function(a){return t.dstBuildParam.replicatorIps.push(a.ip)}))}))},autoConfigDstApplier:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.dstBuildParam.mhaName+"&type=1&selectedIps="+this.dstBuildParam.applierIps).then((function(a){console.log(a.data),t.dstBuildParam.applierIps=[],a.data.data.forEach((function(a){return t.dstBuildParam.applierIps.push(a.ip)}))}))},getSrcMhaResources:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.srcBuildParam.mhaName+"&type=0").then((function(a){console.log(a.data),t.replicatorList.src=a.data.data})),this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.srcBuildParam.mhaName+"&type=1").then((function(a){console.log(a.data),t.applierList.src=a.data.data}))},getDstMhaResources:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.dstBuildParam.mhaName+"&type=0").then((function(a){console.log(a.data),t.replicatorList.dst=a.data.data})),this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.dstBuildParam.mhaName+"&type=1").then((function(a){console.log(a.data),t.applierList.dst=a.data.data}))},getSrcMhaReplicatorsInUse:function(){var t=this;this.axios.get("/api/drc/v2/mha/replicator?mhaName="+this.srcBuildParam.mhaName).then((function(a){t.srcBuildParam.replicatorIps=a.data.data}))},getDstMhaReplicatorsInUse:function(){var t=this;this.axios.get("/api/drc/v2/mha/replicator?mhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildParam.replicatorIps=a.data.data}))},getSrcMhaAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/applier?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildParam.applierIps=a.data.data})),this.axios.get("/api/drc/v2/config/mha/applierGtid?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildParam.applierInitGtid=a.data.data}))},getDstMhaAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/applier?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(a){t.dstBuildParam.applierIps=a.data.data})),this.axios.get("/api/drc/v2/config/mha/applierGtid?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildParam.applierInitGtid=a.data.data}))},getMhaDbAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/dbApplier?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildData.dbApplierDtos=a.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildData.dbApplierDtos=a.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier/switch?mhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildData.dbApplierSwitch=a.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier/switch?mhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildData.dbApplierSwitch=a.data.data}))},querySrcMhaMachineGtid:function(){var t=this,a=this;a.axios.get("/api/drc/v2/mha/gtid/executed?mha="+this.srcBuildParam.mhaName).then((function(a){t.hasTest1=!0,0===a.data.status?(t.srcBuildParam.replicatorInitGtid=a.data.data,t.testSuccess1=!0):t.testSuccess1=!1}))},querySrcMhaGtidCheckRes:function(){var t=this;if(null!=this.srcBuildParam.replicatorInitGtid&&""!==this.srcBuildParam.replicatorInitGtid){var a=this;a.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+this.srcBuildParam.mhaName+"&configGtid="+this.srcBuildParam.replicatorInitGtid).then((function(a){0===a.data.status?(t.gtidCheck.resVo={mha:t.srcBuildParam.mhaName,legal:!0===a.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t.srcBuildParam.replicatorInitGtid,purgedGtid:a.data.data.purgedGtid},t.gtidCheck.modal=!0):alert("位点校验失败!")}))}else alert("位点为空！")},queryDstMhaMachineGtid:function(){var t=this,a=this;a.axios.get("/api/drc/v2/mha/gtid/executed?mha="+this.dstBuildParam.mhaName).then((function(a){t.hasTest2=!0,0===a.data.status?(t.dstBuildParam.replicatorInitGtid=a.data.data,t.testSuccess2=!0):t.testSuccess2=!1}))},queryDstMhaGtidCheckRes:function(){var t=this;if(null!=this.dstBuildParam.replicatorInitGtid&&""!==this.dstBuildParam.replicatorInitGtid){var a=this;a.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+this.dstBuildParam.mhaName+"&configGtid="+this.dstBuildParam.replicatorInitGtid).then((function(a){0===a.data.status?(t.gtidCheck.resVo={mha:t.dstBuildParam.mhaName,legal:!0===a.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t.dstBuildParam.replicatorInitGtid,purgedGtid:a.data.data.purgedGtid},t.gtidCheck.modal=!0):alert("位点校验失败!")}))}else alert("位点为空！")},getSrcDc:function(){var t=this;this.axios.get("/api/drc/v2/mha/dc?mhaName="+this.srcBuildParam.mhaName).then((function(a){t.srcDc=a.data.data}))},getDstDc:function(){var t=this;this.axios.get("/api/drc/v2/mha/dc?mhaName="+this.dstBuildParam.mhaName).then((function(a){t.dstDc=a.data.data}))},changeSrcMha:function(){this.$emit("srcMhaNameChanged",this.srcBuildParam.mhaName),this.getSrcMhaResources(),this.getSrcMhaReplicatorsInUse(),this.getSrcMhaAppliersInUse(),this.getDstMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getSrcDc()},changeDstMha:function(){this.$emit("dstMhaNameChanged",this.dstBuildParam.mhaName),this.getDstMhaResources(),this.getDstMhaReplicatorsInUse(),this.getDstMhaAppliersInUse(),this.getSrcMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getDstDc()},start:function(){this.$Loading.start()},finish:function(){this.$Loading.finish()},error:function(){this.$Loading.error()},changeModal:function(t){var a=this;this.$refs[t].validate((function(t){t?a.drc.reviewModal=!0:a.$Message.error("仍有必填项未填!")}))},preCheckConfigure:function(){this.reviewModal=!0},reviewConfigure:function(){this.drc.reviewModal=!0},submitConfig:function(){var t=this,a=this;this.axios.post("/api/drc/v2/config/",{srcBuildParam:this.srcBuildParam,dstBuildParam:this.dstBuildParam}).then((function(e){console.log(e.data),a.result=e.data,a.reviewModal=!1,a.resultModal=!0,t.refresh()}))},getSrcDbReplications:function(){this.$router.push({path:"/dbTables",query:{srcMhaName:this.dstBuildParam.mhaName,dstMhaName:this.srcBuildParam.mhaName,srcDc:this.dstDc,dstDc:this.srcDc,order:!0}})},getDstDbReplications:function(){this.$router.push({path:"/dbTables",query:{srcMhaName:this.srcBuildParam.mhaName,dstMhaName:this.dstBuildParam.mhaName,srcDc:this.srcDc,dstDc:this.dstDc,order:!0}})},getSrcDbApplierReplications:function(){this.$router.push({path:"/dbAppliers",query:{srcMhaName:this.dstBuildParam.mhaName,dstMhaName:this.srcBuildParam.mhaName,srcDc:this.dstDc,dstDc:this.srcDc,order:!0}})},getDstDbApplierReplications:function(){this.$router.push({path:"/dbAppliers",query:{srcMhaName:this.srcBuildParam.mhaName,dstMhaName:this.dstBuildParam.mhaName,srcDc:this.srcDc,dstDc:this.dstDc,order:!0}})},handleChangeSize:function(t){this.size=t},hasAppliers:function(t){var a=!0,e=!1,i=void 0;try{for(var s,r=t[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var l=s.value;if(l.ips&&l.ips.length>0)return!0}}catch(c){e=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(e)throw i}}return!1},showMhaApplierConfig:function(t){return t?!this.hasAppliers(this.srcBuildData.dbApplierDtos):!this.hasAppliers(this.dstBuildData.dbApplierDtos)},showDbMhaApplierConfig:function(t){return t?this.srcBuildData.dbApplierSwitch||this.hasAppliers(this.srcBuildData.dbApplierDtos):this.dstBuildData.dbApplierSwitch||this.hasAppliers(this.dstBuildData.dbApplierDtos)},refresh:function(){this.getSrcMhaReplicatorsInUse(),this.getDstMhaReplicatorsInUse(),this.getSrcMhaAppliersInUse(),this.getDstMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getSrcDc(),this.getDstDc()}},created:function(){this.getSrcMhaResources(),this.getDstMhaResources(),this.refresh()}},o=c,d=(e("8a76"),e("2877")),p=Object(d["a"])(o,i,s,!1,null,"136ff284",null);a["a"]=p.exports},"8a76":function(t,a,e){"use strict";e("9ae8")},"9ae8":function(t,a,e){}}]);
//# sourceMappingURL=chunk-37586085.4881bdd1.js.map